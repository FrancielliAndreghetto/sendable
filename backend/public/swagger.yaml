openapi: 3.0.0
info:
  title: Documentação API - Agendamento e Envio de Mensagens em Diferentes Plataformas
  version: 1.0.0
  description: API para autenticação, gerenciamento de API Keys e instâncias e envios de mensagens

servers:
  - url: http://localhost:8080/api

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - bearerAuth: []

tags:
  - name: Auth
    description: Endpoints de autenticação
  - name: Api Keys
    description: Endpoints para gerenciamento de API Keys
  - name: Whatsapp - Instâncias
    description: Gerenciar instâncias do whatsapp
  - name: Whatsapp - Contatos
    description: Gerenciar contatos do whatsapp
  - name: Whatsapp - Mensagens
    description: Enviar/agendar mensagens via whatsapp

paths:
  # ===== AUTH =====
  /auth/login:
    post:
      tags:
        - Auth
      summary: Autenticar usuário e gerar token de acesso
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: usuario@exemplo.com
                password:
                  type: string
                  format: password
                  example: senha123
      responses:
        "200":
          description: Autenticado com sucesso, retorna usuário e token
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Autenticado com sucesso.
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          name:
                            type: string
                            example: João Silva
                          email:
                            type: string
                            example: usuario@exemplo.com
                      token:
                        type: string
                        example: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...
        "401":
          description: Credenciais inválidas
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Credenciais inválidas.
        "429":
          description: Muitas tentativas, bloqueio temporário
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Muitas tentativas, aguarde um momento antes de tentar novamente.
        "500":
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao autenticar.
      security: []

  # ===== API Keys =====
  /keys:
    post:
      tags:
        - Api Keys
      summary: Criar uma nova API Key
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  example: Minha Chave API
                scopes:
                  type: array
                  items:
                    type: string
                  nullable: true
                  example: ["read", "write"]
                expires_at:
                  type: string
                  format: date-time
                  nullable: true
                  example: "2025-12-31T23:59:59Z"
      responses:
        "201":
          description: Api Key criada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Api Key Gerada com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      name:
                        type: string
                        example: Minha Chave API
                      partner_id:
                        type: string
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      user_id:
                        type: string
                        nullable: true
                        example: "user_456def"
                      scopes:
                        type: array
                        items:
                          type: string
                        nullable: true
                        example: ["read", "write"]
                      expires_at:
                        type: string
                        format: date-time
                        nullable: true
                        example: "2025-12-31T23:59:59Z"
                      created_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
        "500":
          description: Falha ao criar Api Key
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao criar Api Key.
    get:
      tags:
        - Api Keys
      summary: Listar todas as API Keys
      responses:
        "200":
          description: Lista de Api Keys
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Api Keys consultadas com sucesso.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          example: "123e4567-e89b-12d3-a456-426614174000"
                        name:
                          type: string
                          example: Minha Chave API
                        partner_id:
                          type: string
                          example: "01986209-ae94-7192-9aa4-0497be95ab14"
                        user_id:
                          type: string
                          nullable: true
                          example: "user_456def"
                        scopes:
                          type: array
                          items:
                            type: string
                          nullable: true
                          example: ["read", "write"]
                        expires_at:
                          type: string
                          format: date-time
                          nullable: true
                          example: "2025-12-31T23:59:59Z"
                        created_at:
                          type: string
                          format: date-time
                          example: "2025-07-28T14:32:00Z"
                        updated_at:
                          type: string
                          format: date-time
                          example: "2025-07-28T14:32:00Z"
                  meta:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      last_page:
                        type: integer
                        example: 1
                      per_page:
                        type: integer
                        example: 15
                      total:
                        type: integer
                        example: 3
                      next_page_url:
                        type: string
                        nullable: true
                        example: null
                      prev_page_url:
                        type: string
                        nullable: true
                        example: null
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.
  /keys/{uuid}:
    get:
      tags:
        - Api Keys
      summary: Buscar dados da Api Key
      responses:
        "200":
          description: Buscar dados da Api Key
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Api Key consultada com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      name:
                        type: string
                        example: Minha Chave API
                      partner_id:
                        type: string
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      user_id:
                        type: string
                        nullable: true
                        example: "user_456def"
                      scopes:
                        type: array
                        items:
                          type: string
                        nullable: true
                        example: ["read", "write"]
                      expires_at:
                        type: string
                        format: date-time
                        nullable: true
                        example: "2025-12-31T23:59:59Z"
                      created_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "404":
          description: Api Key não foi encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Api Key não foi encontrada.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.
    put:
      tags:
        - Api Keys
      summary: Atualizar uma API Key
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da API Key a ser atualizada
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Minha Nova Chave API
                  description: Nome para a API Key
                active:
                  type: boolean
                  example: true
                  description: Status ativo/inativo da API Key
                scopes:
                  type: array
                  items:
                    type: string
                    enum:
                      - read
                      - write
                      - delete
                  description: Escopos permitidos para esta API Key
                expires_at:
                  type: string
                  format: date-time
                  example: "2025-12-31T23:59:59Z"
                  description: Data e hora de expiração da API Key (opcional)
      responses:
        "200":
          description: Api Key atualizada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Api Key atualizada com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      name:
                        type: string
                        example: Minha Nova Chave API
                      partner_id:
                        type: string
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      user_id:
                        type: string
                        nullable: true
                        example: "user_456def"
                      active:
                        type: boolean
                        example: true
                      scopes:
                        type: array
                        items:
                          type: string
                        example: ["read", "write"]
                      expires_at:
                        type: string
                        format: date-time
                        example: "2025-12-31T23:59:59Z"
                      created_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2025-08-01T10:20:00Z"
        "400":
          description: Requisição inválida ou erro na atualização
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Api Key não foi encontrada ou dados inválidos.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.
    delete:
      tags:
        - Api Keys
      summary: Deletar uma API Key
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da API Key a ser deletada
      responses:
        "200":
          description: Api Key deletada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Api Key deletada com sucesso.
        "404":
          description: Api Key não foi encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Api Key não foi encontrada.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.

  # ===== WHATSAPP =====
  /whatsapp/instances:
    post:
      tags:
        - Whatsapp - Instâncias
      summary: Criar uma nova instância WhatsApp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - number
              properties:
                name:
                  type: string
                  example: Instância 1
                number:
                  type: string
                  example: "5511999999999"
                  description: Número formatado com código de país (somente dígitos)
                token:
                  type: string
                  nullable: true
                  example: "token_opcional"
      responses:
        "201":
          description: Instância criada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Instância criada com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "01981b72-2f30-726a-a5e2-1a99564541c9"
                      partner_id:
                        type: string
                        format: uuid
                        example: "0198144e-fb0e-7033-8cfc-cd2de4cfe01e"
                      external_id:
                        type: string
                        format: uuid
                        example: "7ac78c26-9d8c-4146-89b0-cb9b9260ca3a"
                      external_name:
                        type: string
                        example: "01981b72-2f30-726a-a5e2-1a99564541c9_teste"
                      custom_code:
                        type: string
                        nullable: true
                        example: null
                      name:
                        type: string
                        example: "teste"
                      whatsapp_number:
                        type: string
                        nullable: true
                        example: null
                      token:
                        type: string
                        nullable: true
                        example: null
                      is_active:
                        type: integer
                        example: 1
                      connected_at:
                        type: string
                        format: date-time
                        example: "2025-07-18 02:52:04"
                      disconnected_at:
                        type: string
                        format: date-time
                        nullable: true
                        example: null
                      created_at:
                        type: string
                        format: date-time
                        example: "2025-07-18T02:52:04.000000Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2025-07-18T02:52:05.000000Z"
        "400":
          description: Dados inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Dados inválidos.
        "500":
          description: Falha ao criar instância
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao criar instância.
    get:
      tags:
        - Whatsapp - Instâncias
      summary: Listar instâncias WhatsApp
      responses:
        "200":
          description: Lista paginada de instâncias
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Instâncias consultadas com sucesso.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          example: "01981b72-2f30-726a-a5e2-1a99564541c9"
                        partner_id:
                          type: string
                          format: uuid
                          example: "0198144e-fb0e-7033-8cfc-cd2de4cfe01e"
                        external_id:
                          type: string
                          format: uuid
                          example: "7ac78c26-9d8c-4146-89b0-cb9b9260ca3a"
                        external_name:
                          type: string
                          example: "01981b72-2f30-726a-a5e2-1a99564541c9_teste"
                        custom_code:
                          type: string
                          nullable: true
                          example: null
                        name:
                          type: string
                          example: "teste"
                        whatsapp_number:
                          type: string
                          nullable: true
                          example: null
                        token:
                          type: string
                          nullable: true
                          example: null
                        is_active:
                          type: integer
                          example: 1
                        connected_at:
                          type: string
                          format: date-time
                          example: "2025-07-18 02:52:04"
                        disconnected_at:
                          type: string
                          format: date-time
                          nullable: true
                          example: null
                        created_at:
                          type: string
                          format: date-time
                          example: "2025-07-18T02:52:04.000000Z"
                        updated_at:
                          type: string
                          format: date-time
                          example: "2025-07-18T02:52:05.000000Z"
                  meta:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      last_page:
                        type: integer
                        example: 1
                      per_page:
                        type: integer
                        example: 15
                      total:
                        type: integer
                        example: 3
                      next_page_url:
                        type: string
                        nullable: true
                        example: null
                      prev_page_url:
                        type: string
                        nullable: true
                        example: null
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao listar instâncias.
  /whatsapp/instances/{uuid}:
    delete:
      tags:
        - Whatsapp - Instâncias
      summary: Deletar uma instância WhatsApp
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da instância WhatsApp
      responses:
        "200":
          description: Instância deletada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Instância deletada com sucesso.
        "404":
          description: Instância não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Nenhuma instância encontrada com o UUID fornecido.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao deletar a instância.
  /whatsapp/instances/connect/{uuid}:
    post:
      tags:
        - Whatsapp - Instâncias
      summary: Gerar QRCode para conexão de instância WhatsApp
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da instância WhatsApp
      responses:
        "200":
          description: QRCode gerado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: QRCode para conexão gerado com sucesso.
                  data:
                    type: string
                    description: QRCode em base64
                    example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA..."
        "404":
          description: Instância WhatsApp não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Nenhuma instância encontrada com o UUID fornecido.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao conectar da instância.
  /whatsapp/instances/disconnect/{uuid}:
    post:
      tags:
        - Whatsapp - Instâncias
      summary: Desconectar uma instância WhatsApp
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da instância WhatsApp
      responses:
        "200":
          description: Instância desconectada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Instância desconectada com sucesso.
        "404":
          description: Instância não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Nenhuma instância encontrada com o UUID fornecido.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao desconectar da instância.
  /whatsapp/instances/reload/{uuid}:
    post:
      tags:
        - Whatsapp - Instâncias
      summary: Recarregar (reconectar) instância WhatsApp e gerar QRCode
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da instância WhatsApp
      responses:
        "200":
          description: QRCode para reconexão gerado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: QRCode para reconexão gerado com sucesso.
                  data:
                    type: string
                    description: QRCode em base64
                    example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA..."
        "404":
          description: Instância não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Nenhuma instância encontrada com o UUID fornecido.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao recarregar a instância.

  /whatsapp/instances/sync-contacts/{uuid}:
    post:
      tags:
        - Whatsapp - Instâncias
      summary: Sincronizar contatos da instância WhatsApp
      description: Inicia a sincronização de contatos da instância WhatsApp. Os contatos são processados em segundo plano através de jobs.
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da instância WhatsApp
      responses:
        "200":
          description: Sincronização iniciada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Contatos estão sendo salvos em segundo plano.
                  data:
                    type: object
                    nullable: true
                    example: null
        "404":
          description: Instância não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Nenhuma instância encontrada com o UUID fornecido.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao sincronizar contatos.

  # ===== WHATSAPP CONTACTS =====
  /whatsapp/contacts:
    post:
      tags:
        - Whatsapp - Contatos
      summary: Criar um novo contato
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                instance_id:
                  type: string
                  nullable: true
                  example: "123e4567-e89b-12d3-a456-426614174000"
                  description: UUID da instância caso associado
                name:
                  type: string
                  example: Contato teste
                number:
                  type: string
                  example: "5511999999999"
                  description: Número formatado com código de país (somente dígitos)
                image:
                  type: string
                  nullable: true
                  description: Pode ser uma URL da imagem ou uma string em base64
                  examples:
                    url:
                      summary: URL da imagem
                      value: "https://cdn.example.com/image.jpg"
                    base64:
                      summary: Imagem em base64
                      value: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
      responses:
        "201":
          description: Contato criado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Contato criado com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      partner_id:
                        type: string
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      instance_id:
                        type: string
                        example: "69978009-ae94-7192-9aa4-04974e95ab14"
                      name:
                        type: string
                        example: Contato Teste
                      number:
                        type: string
                        example: "5511999999999"
                      image:
                        type: string
                        example: "https://cdn.example.com/image.jpg"
                      created_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
        "500":
          description: Falha ao criar Contato
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao criar Contato.
    get:
      tags:
        - Whatsapp - Contatos
      summary: Listar todas os Contatos
      responses:
        "200":
          description: Lista de ontatos
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Contatos consultados com sucesso.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          example: "123e4567-e89b-12d3-a456-426614174000"
                        partner_id:
                          type: string
                          example: "01986209-ae94-7192-9aa4-0497be95ab14"
                        instance_id:
                          type: string
                          example: "69978009-ae94-7192-9aa4-04974e95ab14"
                        name:
                          type: string
                          example: Contato Teste
                        number:
                          type: string
                          example: "5511999999999"
                        image:
                          type: string
                          example: "https://cdn.example.com/image.jpg"
                        created_at:
                          type: string
                          format: date-time
                          example: "2025-07-28T14:32:00Z"
                        updated_at:
                          type: string
                          format: date-time
                          example: "2025-07-28T14:32:00Z"
                  meta:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      last_page:
                        type: integer
                        example: 1
                      per_page:
                        type: integer
                        example: 15
                      total:
                        type: integer
                        example: 3
                      next_page_url:
                        type: string
                        nullable: true
                        example: null
                      prev_page_url:
                        type: string
                        nullable: true
                        example: null
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.
  /whatsapp/contacts/{uuid}:
    get:
      tags:
        - Whatsapp - Contatos
      summary: Buscar dados do Contato
      responses:
        "200":
          description: Buscar dados do Contato
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Contato consultado com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      partner_id:
                        type: string
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      instance_id:
                        type: string
                        example: "69978009-ae94-7192-9aa4-04974e95ab14"
                      name:
                        type: string
                        example: Contato Teste
                      number:
                        type: string
                        example: "5511999999999"
                      image:
                        type: string
                        example: "https://cdn.example.com/image.jpg"
                      created_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "404":
          description: Contato não foi encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Contato não foi encontrado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.
    put:
      tags:
        - Whatsapp - Contatos
      summary: Atualizar um Contato
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID do Contato a ser atualizado
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                instance_id:
                  type: string
                  nullable: true
                  example: "123e4567-e89b-12d3-a456-426614174000"
                  description: Nova instancia associada
                name:
                  type: string
                  example: Novo Contato teste
                number:
                  type: string
                  example: "5511999999999"
                  description: Número alterado do contato
                image:
                  type: string
                  nullable: true
                  description: Nova URL da imagem ou uma string em base64
                  examples:
                    url:
                      summary: URL da imagem
                      value: "https://cdn.example.com/image.jpg"
                    base64:
                      summary: Imagem em base64
                      value: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
      responses:
        "200":
          description: Contato atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Contato atualizado com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      partner_id:
                        type: string
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      instance_id:
                        type: string
                        example: "69978009-ae94-7192-9aa4-04974e95ab14"
                      name:
                        type: string
                        example: Contato Teste
                      number:
                        type: string
                        example: "5511999999999"
                      image:
                        type: string
                        example: "https://cdn.example.com/image.jpg"
                      created_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2025-07-28T14:32:00Z"
        "400":
          description: Requisição inválida ou erro na atualização
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Contato não foi encontrado ou dados inválidos.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno do servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.
    delete:
      tags:
        - Whatsapp - Contatos
      summary: Deletar um Contato
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID do Contato a ser deletado
      responses:
        "200":
          description: Contato deletado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Contato deletado com sucesso.
        "404":
          description: Contato não foi encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Contato não foi encontrado.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Erro interno.
  # ===== WHATSAPP MESSAGES =====
  /whatsapp/messages:
    get:
      tags:
        - Whatsapp - Mensagens
      summary: Listar todas as mensagens WhatsApp
      parameters:
        - in: query
          name: per_page
          schema:
            type: integer
            default: 15
            minimum: 1
            maximum: 100
          description: Número de itens por página
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            minimum: 1
          description: Número da página
      responses:
        "200":
          description: Lista paginada de mensagens
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mensagens consultadas com sucesso.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          example: "123e4567-e89b-12d3-a456-426614174000"
                        partner_id:
                          type: string
                          format: uuid
                          example: "01986209-ae94-7192-9aa4-0497be95ab14"
                        instance_id:
                          type: string
                          format: uuid
                          example: "69978009-ae94-7192-9aa4-04974e95ab14"
                        contact_id:
                          type: array
                          items:
                            type: string
                            format: uuid
                          example:
                            [
                              "123e4567-e89b-12d3-a456-426614174001",
                              "123e4567-e89b-12d3-a456-426614174002",
                            ]
                        name:
                          type: string
                          example: João Silva
                        message:
                          type: string
                          example: Olá! Esta é uma mensagem de teste.
                        scheduled_date:
                          type: string
                          format: date-time
                          nullable: true
                          example: "2024-01-01T10:00:00"
                        status_id:
                          type: integer
                          example: 1
                          description: 0 = Pendente/Falha, 1 = Enviada com sucesso
                        next_send_at:
                          type: string
                          format: date-time
                          nullable: true
                          example: "2024-01-01T10:00:00"
                        error_message:
                          type: string
                          nullable: true
                          example: null
                        delivery_status:
                          type: string
                          nullable: true
                          example: "enviada"
                          description: "enviada, falha ou null"
                        custom_code:
                          type: string
                          nullable: true
                          example: "MSG_001"
                        created_at:
                          type: string
                          format: date-time
                          example: "2024-01-01T10:00:00.000000Z"
                        updated_at:
                          type: string
                          format: date-time
                          example: "2024-01-01T10:00:00.000000Z"
                        instance:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid
                              example: "69978009-ae94-7192-9aa4-04974e95ab14"
                            name:
                              type: string
                              example: Instância Principal
                        contact:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid
                              example: "123e4567-e89b-12d3-a456-426614174001"
                            name:
                              type: string
                              example: João Silva
                  meta:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      last_page:
                        type: integer
                        example: 5
                      per_page:
                        type: integer
                        example: 15
                      total:
                        type: integer
                        example: 75
                      next_page_url:
                        type: string
                        nullable: true
                        example: "http://localhost/api/whatsapp/messages?page=2"
                      prev_page_url:
                        type: string
                        nullable: true
                        example: null
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao listar mensagens.
    post:
      tags:
        - Whatsapp - Mensagens
      summary: Criar uma nova mensagem WhatsApp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - instance_id
                - name
                - message
              properties:
                instance_id:
                  type: string
                  format: uuid
                  example: "69978009-ae94-7192-9aa4-04974e95ab14"
                  description: UUID da instância WhatsApp
                contact_id:
                  type: array
                  items:
                    type: string
                    format: uuid
                  nullable: true
                  example:
                    [
                      "123e4567-e89b-12d3-a456-426614174001",
                      "123e4567-e89b-12d3-a456-426614174002",
                    ]
                  description: Array de UUIDs dos contatos
                name:
                  type: string
                  example: João Silva
                  description: Nome do contato
                message:
                  type: string
                  example: Olá! Esta é uma mensagem de teste.
                  description: Conteúdo da mensagem
                scheduled_date:
                  type: string
                  format: date-time
                  nullable: true
                  example: "2024-01-01T10:00:00"
                  description: Data e hora agendada para envio
                custom_code:
                  type: string
                  nullable: true
                  example: "MSG_001"
                  description: Código personalizado para identificação
                is_recurring:
                  type: boolean
                  default: false
                  example: false
                  description: Define se a mensagem é recorrente
                recurrence_type:
                  type: string
                  enum: [daily, weekly, monthly, quarterly, yearly]
                  nullable: true
                  example: "weekly"
                  description: Tipo de recorrência (obrigatório se is_recurring for true)
                recurrence_interval:
                  type: integer
                  minimum: 1
                  nullable: true
                  example: 2
                  description: "Intervalo de recorrência (ex: 2 para (a cada 2 semanas))"
      responses:
        "201":
          description: Mensagem criada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mensagem criada com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      partner_id:
                        type: string
                        format: uuid
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      instance_id:
                        type: string
                        format: uuid
                        example: "69978009-ae94-7192-9aa4-04974e95ab14"
                      contact_id:
                        type: array
                        items:
                          type: string
                          format: uuid
                        example:
                          [
                            "123e4567-e89b-12d3-a456-426614174001",
                            "123e4567-e89b-12d3-a456-426614174002",
                          ]
                      name:
                        type: string
                        example: João Silva
                      message:
                        type: string
                        example: Olá! Esta é uma mensagem de teste.
                      scheduled_date:
                        type: string
                        format: date-time
                        nullable: true
                        example: "2024-01-01T10:00:00"
                      status_id:
                        type: integer
                        example: 0
                      next_send_at:
                        type: string
                        format: date-time
                        nullable: true
                        example: "2024-01-01T10:00:00"
                        description: "Data do próximo envio"
                      error_message:
                        type: string
                        nullable: true
                        example: null
                      delivery_status:
                        type: string
                        nullable: true
                        example: null
                      custom_code:
                        type: string
                        nullable: true
                        example: "MSG_001"
                      created_at:
                        type: string
                        format: date-time
                        example: "2024-01-01T10:00:00.000000Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2024-01-01T10:00:00.000000Z"
        "400":
          description: Dados inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Dados inválidos.
        "500":
          description: Falha ao criar mensagem
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao criar mensagem.
  /whatsapp/messages/{uuid}:
    get:
      tags:
        - Whatsapp - Mensagens
      summary: Buscar uma mensagem específica por UUID
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da mensagem
      responses:
        "200":
          description: Mensagem encontrada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mensagem consultada com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      partner_id:
                        type: string
                        format: uuid
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      instance_id:
                        type: string
                        format: uuid
                        example: "69978009-ae94-7192-9aa4-04974e95ab14"
                      contact_id:
                        type: array
                        items:
                          type: string
                          format: uuid
                        example:
                          [
                            "123e4567-e89b-12d3-a456-426614174001",
                            "123e4567-e89b-12d3-a456-426614174002",
                          ]
                      name:
                        type: string
                        example: João Silva
                      message:
                        type: string
                        example: Olá! Esta é uma mensagem de teste.
                      scheduled_date:
                        type: string
                        format: date-time
                        nullable: true
                        example: "2024-01-01T10:00:00"
                      status_id:
                        type: integer
                        example: 1
                      next_send_at:
                        type: string
                        format: date-time
                        nullable: true
                        example: "2024-01-01T10:00:00"
                      error_message:
                        type: string
                        nullable: true
                        example: null
                      delivery_status:
                        type: string
                        nullable: true
                        example: "enviada"
                      custom_code:
                        type: string
                        nullable: true
                        example: "MSG_001"
                      created_at:
                        type: string
                        format: date-time
                        example: "2024-01-01T10:00:00.000000Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2024-01-01T10:00:00.000000Z"
        "404":
          description: Mensagem não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Mensagem não encontrada.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao consultar mensagem.
    put:
      tags:
        - Whatsapp - Mensagens
      summary: Atualizar uma mensagem existente
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da mensagem a ser atualizada
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                instance_id:
                  type: string
                  format: uuid
                  nullable: true
                  example: "69978009-ae94-7192-9aa4-04974e95ab14"
                  description: UUID da instância WhatsApp
                contact_id:
                  type: array
                  items:
                    type: string
                    format: uuid
                  nullable: true
                  example:
                    [
                      "123e4567-e89b-12d3-a456-426614174001",
                      "123e4567-e89b-12d3-a456-426614174002",
                    ]
                  description: Array de UUIDs dos contatos
                name:
                  type: string
                  nullable: true
                  example: João Silva Atualizado
                  description: Nome do contato
                message:
                  type: string
                  nullable: true
                  example: Olá! Esta é uma mensagem atualizada.
                  description: Conteúdo da mensagem
                scheduled_date:
                  type: string
                  format: date-time
                  nullable: true
                  example: "2024-01-01T11:00:00"
                  description: Nova data e hora agendada
                custom_code:
                  type: string
                  nullable: true
                  example: "MSG_001_UPDATED"
                  description: Código personalizado atualizado
                next_send_at:
                  type: string
                  format: date-time
                  nullable: true
                  example: "2024-01-01T11:00:00"
                  description: Próxima data de envio para mensagens recorrentes
                is_recurring:
                  type: boolean
                  nullable: true
                  example: true
                  description: Define se a mensagem é recorrente
                recurrence_type:
                  type: string
                  enum: [daily, weekly, monthly, quarterly, yearly]
                  nullable: true
                  example: "monthly"
                  description: Tipo de recorrência (obrigatório se is_recurring for true)
                recurrence_interval:
                  type: integer
                  minimum: 1
                  nullable: true
                  example: 3
                  description: "Intervalo de recorrência (ex: 3 para a cada 3 meses)"
      responses:
        "200":
          description: Mensagem atualizada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mensagem atualizada com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: "123e4567-e89b-12d3-a456-426614174000"
                      partner_id:
                        type: string
                        format: uuid
                        example: "01986209-ae94-7192-9aa4-0497be95ab14"
                      instance_id:
                        type: string
                        format: uuid
                        example: "69978009-ae94-7192-9aa4-04974e95ab14"
                      contact_id:
                        type: array
                        items:
                          type: string
                          format: uuid
                        example:
                          [
                            "123e4567-e89b-12d3-a456-426614174001",
                            "123e4567-e89b-12d3-a456-426614174002",
                          ]
                      name:
                        type: string
                        example: João Silva Atualizado
                      message:
                        type: string
                        example: Olá! Esta é uma mensagem atualizada.
                      scheduled_date:
                        type: string
                        format: date-time
                        nullable: true
                        example: "2024-01-01T11:00:00"
                      status_id:
                        type: integer
                        example: 0
                      next_send_at:
                        type: string
                        format: date-time
                        nullable: true
                        example: null
                      error_message:
                        type: string
                        nullable: true
                        example: null
                      delivery_status:
                        type: string
                        nullable: true
                        example: null
                      custom_code:
                        type: string
                        nullable: true
                        example: "MSG_001_UPDATED"
                      created_at:
                        type: string
                        format: date-time
                        example: "2024-01-01T10:00:00.000000Z"
                      updated_at:
                        type: string
                        format: date-time
                        example: "2024-01-01T11:00:00.000000Z"
        "404":
          description: Mensagem não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Mensagem não encontrada.
        "400":
          description: Dados inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Dados inválidos.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao atualizar mensagem.
    delete:
      tags:
        - Whatsapp - Mensagens
      summary: Deletar uma mensagem
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
            format: uuid
          description: UUID da mensagem a ser deletada
      responses:
        "200":
          description: Mensagem deletada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mensagem deletada com sucesso.
        "404":
          description: Mensagem não encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Mensagem não encontrada.
        "401":
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Não autorizado.
        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Falha ao deletar mensagem.
